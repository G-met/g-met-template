// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

generator dbml {
  provider              = "prisma-dbml-generator"
  projectDatabaseType   = "PostgreSQL"
  includeRelationFields = false
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model equipo {
  id                          String                        @id @default(cuid())
  codigo                      String                        @unique @db.VarChar(20)
  descripcion                 String                        @db.VarChar(60)
  modelo                      String                        @db.VarChar(40)
  serie                       String                        @db.VarChar(40)
  ubicacion                   ubicacion                     @relation(fields: [ubicacion_id], references: [id])
  responsable                 responsable                   @relation(fields: [responsable_id], references: [id])
  responsable_id              String                        @unique
  ubicacion_id                String                        @unique
  marca                       marca                         @relation(fields: [marca_id], references: [id])
  marca_id                    String                        @unique
  equipo_actividad_frecuencia equipo_actividad_frecuencia[]
  fecha_creacion              DateTime                      @default(now())
  fecha_actualizacion         DateTime                      @updatedAt
  fecha_inactivacion          DateTime?
}

model responsable {
  id                  String      @id @default(cuid())
  equipo              equipo[]
  ubicacion           ubicacion[]
  identificacion      String      @unique @db.VarChar(10)
  nombre              String      @db.VarChar(40)
  apellido            String      @db.VarChar(40)
  fecha_creacion      DateTime    @default(now())
  fecha_actualizacion DateTime    @updatedAt
  fecha_inactivacion  DateTime?
}

model ubicacion {
  id                  String      @id @default(cuid())
  nombre              String      @db.VarChar(40)
  equipo              equipo[]
  responsable         responsable @relation(fields: [responsable_id], references: [id])
  responsable_id      String      @unique
  fecha_creacion      DateTime    @default(now())
  fecha_actualizacion DateTime    @updatedAt
  fecha_inactivacion  DateTime?
}

model marca {
  id                 String    @id @default(cuid())
  identificacion     String
  descripcion        String
  equipo             equipo[]
  fechaCreacion      DateTime  @default(now())
  fechaactualizacion DateTime  @updatedAt
  fecha_inactivacion DateTime?
}

model tipo_actividad {
  id                          String                      @id @default(cuid())
  descripcion                 String
  equipo_actividad_frecuencia equipo_actividad_frecuencia @relation(fields: [tipo_actividad_id], references: [id])
  tipo_actividad_id           String
  fechaCreacion               DateTime                    @default(now())
  fechaactualizacion          DateTime                    @updatedAt
  fecha_inactivacion          DateTime?
}

model rol {
  id_rol             String      @id @default(cuid())
  descricion         String
  status             enum_status @default(activo)
  fechaCreacion      DateTime    @default(now())
  fechaActualizacion DateTime    @updatedAt
}

// Tabla intermedia
model equipo_actividad_frecuencia {
  id                             String           @id @default(cuid())
  descripcion                    String
  frecuencia                     frecuencia[]
  tipo_actividad                 tipo_actividad[]
  equipo_actividad_frecuencia    equipo           @relation(fields: [equipo_actividad_frecuencia_id], references: [id])
  equipo_actividad_frecuencia_id String
  fecha_creacion                 DateTime         @default(now())
  fecha_actualizacion            DateTime         @updatedAt
  fecha_inactivacion             DateTime?
}

model frecuencia {
  id_frecuencia               String                      @id @default(cuid())
  descripcion                 String
  cantidad_dias               Int                         @db.Integer
  equipo_actividad_frecuencia equipo_actividad_frecuencia @relation(fields: [frecuencia_id], references: [id])
  frecuencia_id               String
  fecha_creacion              DateTime                    @default(now())
  fecha_actualizacion         DateTime                    @updatedAt
  fecha_inactivacion          DateTime?
}

model usuario {
  id     String @id @default(cuid())
  nombre String @db.VarChar(40)
  correo String @db.VarChar(50) @unique
  fecha_creacion              DateTime                    @default(now())
  fecha_actualizacion         DateTime                    @updatedAt
  fecha_inactivacion          DateTime?
}

// Lugar para los Enum

enum enum_status {
  activo
  inactivo
}
